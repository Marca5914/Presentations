<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haemodynamic Assessment & Management of Hypotension</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans flex flex-col h-screen antialiased">

    <!-- Slide Container -->
    <main class="flex-grow flex items-center justify-center p-4">
        <div id="slide-container" class="aspect-video w-full max-w-6xl bg-white rounded-xl shadow-2xl flex flex-col justify-center overflow-hidden">
            <!-- Slides will be rendered here by JavaScript -->
        </div>
    </main>

    <!-- Navigation -->
    <footer class="flex-shrink-0 p-4 bg-gray-100">
        <div class="flex items-center justify-center space-x-4 max-w-md mx-auto">
            <button id="prev-btn" class="flex items-center gap-2 px-6 py-3 bg-white rounded-lg shadow-md hover:bg-gray-200 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline></svg>
                <span class="text-gray-700 font-semibold">Prev</span>
            </button>
            <div id="slide-counter" class="text-gray-600 font-medium">
                <!-- Counter will be updated here -->
            </div>
            <button id="next-btn" class="flex items-center gap-2 px-6 py-3 bg-white rounded-lg shadow-md hover:bg-gray-200 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                <span class="text-gray-700 font-semibold">Next</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline></svg>
            </button>
        </div>
    </footer>

    <script>
        // --- Icon SVGs ---
        const icons = {
            AlertTriangle: '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-500"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',
            HelpCircle: '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-500"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',
            Baby: '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-500"><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-1.5 2.5-3.5 2.5c-.8 0-1.5-.4-2-1L8.5 6.3"/></svg>',
            Target: '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-purple-500"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>',
            CheckCircle: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-green-500 mr-3 mt-1 flex-shrink-0"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>',
            ListOrdered: '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-cyan-600"><line x1="10" x2="21" y1="6" y2="6"/><line x1="10" x2="21" y1="12" y2="12"/><line x1="10" x2="21" y1="18" y2="18"/><path d="M4 6h1v4"/><path d="M4 10h2"/><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1.5"/></svg>',
            Search: '<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-teal-500"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',
            ShieldCheck: '<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>',
            Activity: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>',
            Wind: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"/></svg>',
            Droplets: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.48-2.26-1.3-3.05C8.9 8.4 8 7.3 8 6.25S8.44 4 9.25 4c.81 0 1.25.44 1.25 1.25a1 1 0 0 0 2 0C12.5 2.83 11.07 1 9.25 1 7.43 1 6 2.83 6 5.25c0 1.63.9 3.2 2 4.25-1.13 1.1-2 2.6-2 4.25a5.26 5.26 0 0 0 1 3.25"/><path d="M12.56 16.3c.9-2.3 4.24-7.3 4.24-7.3s.83-1.25-.26-2.34c-1.09-1.1-2.33-.83-2.33-.83s-5.04 4.04-7.3 4.24"/></svg>',
            BrainCircuit: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><path d="M12 2a2.5 2.5 0 0 0-2.5 2.5v.75a2.5 2.5 0 0 1-5 0V4.5A2.5 2.5 0 0 0 2 2"/><path d="M12 22a2.5 2.5 0 0 1 2.5-2.5v-.75a2.5 2.5 0 0 0-5 0v.75A2.5 2.5 0 0 1 12 22"/><path d="M4.5 14.5a2.5 2.5 0 0 0 0-5 .5.5 0 0 1 0-1 2.5 2.5 0 0 0 0-5"/><path d="M19.5 14.5a2.5 2.5 0 0 1 0-5 .5.5 0 0 0 0-1 2.5 2.5 0 0 1 0-5"/><path d="M12 12a2.5 2.5 0 0 0-2.5-2.5V9a.5.5 0 0 1-1 0V8.5A2.5 2.5 0 0 0 6 6"/><path d="M12 12a2.5 2.5 0 0 1 2.5 2.5v.5a.5.5 0 0 0 1 0v-.5A2.5 2.5 0 0 1 18 12"/><circle cx="12" cy="12" r="4"/><circle cx="4.5" cy="4.5" r=".5"/><circle cx="19.5" cy="4.5" r=".5"/><circle cx="4.5" cy="19.5" r=".5"/><circle cx="19.5" cy="19.5" r=".5"/></svg>',
            HeartPulse: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>',
            ChevronsRight: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline></svg>',
        };

        // --- Slide Data ---
        const slides = [
            { type: 'title', title: 'Haemodynamic Assessment & Management of Hypotension', subtitle: 'A Modern Approach for the Preterm Neonate', author: 'Marcus Adams' },
            { type: 'list', title: 'The Challenge: Moving Beyond a Single Number', icon: icons.AlertTriangle, points: ['Management of low blood flow in preterm neonates is complex and challenging.', 'Historically, there has been an over-reliance on mean blood pressure (BP) as the primary trigger for intervention.', 'Standard protocols often overlook the unique underlying pathophysiology of the individual infant.', 'This can lead to the widespread and sometimes inappropriate use of vasoactive medications.'], note: 'The core issue: We often "treat the number," not the patient.' },
            { type: 'list', title: 'Treat the Patient, Not the Number', icon: icons.HelpCircle, points: ['While low BP is associated with complications like IVH and NEC, a direct causal link is unproven.', 'There is no high-quality evidence that simply raising the BP number improves long-term outcomes.', 'In fact, regimented use of antihypotensive therapy is linked to an increased risk of death and neurodevelopmental impairment.', 'A "normal" mean BP can be misleading, masking significant underlying issues.'], note: 'Focusing on a single metric can be ineffective and potentially harmful.' },
            { type: 'diagram', title: 'The Goal: Optimise Oxygen Delivery' },
            { type: 'icons', title: 'The Unique Preterm Heart', icon: icons.Baby, items: [{ icon: icons.Activity, text: 'Immature, inefficient contractile fibers.' }, { icon: '<div class="font-bold text-indigo-600 text-2xl">≠</div>', text: 'Stiffer muscle, less compliant.' }, { icon: icons.HeartPulse, text: 'Limited cardiac reserve in times of stress.' }, { icon: icons.BrainCircuit, text: 'Poor adrenergic innervation & fewer receptors.' }, { icon: icons.Wind, text: 'Predominant vasopressor (constriction) effect from drugs.' }, { icon: icons.Droplets, text: 'Different, compromised response to volume loading.' }], note: 'It is not just a smaller version of a term heart.' },
            { type: 'list', title: 'Resulting Clinical Phenotype', icon: icons.Target, points: ['Poor tolerance of increased afterload, leading to low cardiac output.', 'Reduced diastolic filling time (due to high HR) can cause pulmonary venous congestion.', 'Vasoactive drugs often cause vasoconstriction rather than improving contractility.', 'Little to no cardiac reserve to handle stressors like sepsis or NEC.', 'A high resting systemic vascular tone is common.'], note: 'These unique characteristics dictate how preterm infants respond to illness and treatment.' },
            { type: 'split', title: 'Looking Beyond the Mean BP', left: { title: 'Systolic BP', content: 'A surrogate for myocardial contractility and stroke volume.', color: 'blue' }, right: { title: 'Diastolic BP', content: 'A surrogate for Systemic Vascular Resistance (SVR).', color: 'red' }, note: 'Example: A mean BP of 30 can be 32/25 (high SVR, poor contractility) or 40/10 (vasodilatory shock). The treatment for each is completely different. Echocardiography is useful to differentiate.' },
            { type: 'process', title: 'A Better, Physiology-Based Approach', steps: [{ icon: icons.ListOrdered, title: 'Step 1: Assess', description: 'Use normative systolic & diastolic BP ranges for gestation.' }, { icon: icons.HelpCircle, title: 'Step 2: Investigate', description: 'Think critically about the underlying cause of the hypotension.' }, { icon: icons.CheckCircle, title: 'Step 3: Target', description: 'Devise a management plan that targets the specific pathophysiology.' }] },
            { type: 'table', title: 'Normative BP Reference Ranges (3rd Centile)', note: 'Data from "Blood Pressure Reference Ranges for Preterm Infants"', headers: ['Gestation', 'Systolic (mmHg)', 'Diastolic (mmHg)', 'Mean (mmHg)'], rows: [['24', '32', '15', '26'], ['25', '34', '16', '26'], ['26', '36', '17', '27'], ['27', '38', '17', '27'], ['28', '40', '18', '28'], ['29', '42', '19', '28'], ['30', '43', '20', '29'], ['31', '45', '20', '30'], ['32', '46', '21', '30'], ['33', '47', '22', '30'], ['34', '48', '23', '31'], ['35', '49', '24', '32'], ['36', '50', '25', '32']] },
            { type: 'flowchart', title: 'Step 3: Targeted Management Plan', items: [{ problem: 'Low Preload', cause: 'Hypovolemia (e.g., blood loss)', solution: 'Cautious Fluid Resuscitation', color: 'blue' }, { problem: 'High Afterload', cause: 'Pulmonary Hypertension (PPHN)', solution: 'Afterload Reduction (e.g., iNO)', color: 'orange' }, { problem: 'Poor Contractility', cause: 'Myocardial Dysfunction', solution: 'Inotropes (e.g., Dobutamine)', color: 'green' }, { problem: 'Low Afterload', cause: 'Vasodilatory Shock (e.g., Sepsis)', solution: 'Vasopressors (e.g., Noradrenaline)', color: 'red' }] },
            { type: 'summary', title: 'Key Takeaways', points: [{ icon: icons.AlertTriangle, text: 'Stop treating the number. Mean BP is an unreliable, often misleading, indicator of haemodynamic status.' }, { icon: icons.Baby, text: 'The preterm heart is unique, with limited reserve and a different response to stress and medications.' }, { icon: icons.Search, text: 'Adopt a physiology-based approach: Assess with systolic/diastolic BP, investigate the cause, and target the specific problem.' }, { icon: icons.ShieldCheck, text: 'Tailor therapy to the underlying issue—whether it’s preload, afterload, or contractility—for safer, more effective management.' }] },
            { type: 'references', title: 'References', references: ["Dempsey, E. M., & Barrington, K. J. (2007). Treating hypotension in the preterm infant: when and with what. *Archives of Disease in Childhood-Fetal and Neonatal Edition*, 92(6), F424-F425.", "Zubair, A., & Batton, B. (2020). Blood pressure reference ranges for preterm infants. *Journal of Perinatology*, 40(1), 30-36.", "de Boode, W. P., Singh, Y., & El-Khuffash, A. (2016). The physiologically based approach to the management of neonatal hypotension. *Frontiers in Pediatrics*, 4, 98.", "Giesinger, R. E., & McNamara, P. J. (2016). Hemodynamic instability in the critically ill neonate: An approach to cardiovascular support based on disease pathophysiology. *Seminars in perinatology*, 40(3), 174-188.", "Mullaly R, El-Khuffash AFHaemodynamic assessment and management of hypotension in the preterm, Archives of Disease in Childhood - Fetal and Neonatal Edition 2024;109:120-127."] }
        ];

        // --- State ---
        let currentSlide = 0;

        // --- DOM Elements ---
        const slideContainer = document.getElementById('slide-container');
        const slideCounter = document.getElementById('slide-counter');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        // --- Slide Rendering Functions ---

        const renderTitleSlide = (slide) => `
            <div class="flex flex-col items-center justify-center text-center h-full p-8">
                <h1 class="text-4xl md:text-6xl font-bold text-gray-800 mb-4">${slide.title}</h1>
                <p class="text-xl md:text-2xl text-gray-600 mb-8">${slide.subtitle}</p>
                <p class="text-lg text-gray-500">${slide.author}</p>
            </div>`;

        const renderListSlide = (slide) => `
            <div class="p-8 md:p-12">
                <div class="flex items-start gap-6">
                    <div class="flex-shrink-0">${slide.icon}</div>
                    <div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-6">${slide.title}</h2>
                        <ul class="space-y-4">
                            ${slide.points.map(point => `
                                <li class="flex items-start">
                                    ${icons.CheckCircle}
                                    <span class="text-lg text-gray-700">${point}</span>
                                </li>`).join('')}
                        </ul>
                        ${slide.note ? `<p class="mt-8 text-center bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md text-lg italic">${slide.note}</p>` : ''}
                    </div>
                </div>
            </div>`;
        
        const renderDiagramSlide = (slide) => `
            <div class="p-8 md:p-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">${slide.title}</h2>
                <div class="w-full text-center flex flex-col items-center justify-center space-y-4 p-4">
                    <div class="flex flex-col md:flex-row gap-4 md:gap-8 items-center">
                        <div class="bg-blue-100 p-4 rounded-lg shadow-md w-full md:w-auto">
                            <h3 class="text-lg font-bold text-blue-800 mb-2">Cardiac Output</h3>
                            <div class="flex justify-around gap-2 text-sm">
                                <span class="bg-blue-200 px-2 py-1 rounded">Preload</span>
                                <span class="bg-blue-200 px-2 py-1 rounded">Afterload</span>
                                <span class="bg-blue-200 px-2 py-1 rounded">Contractility</span>
                                <span class="bg-blue-200 px-2 py-1 rounded">Heart Rate</span>
                            </div>
                        </div>
                        <p class="text-2xl font-bold text-gray-600">+</p>
                        <div class="bg-red-100 p-4 rounded-lg shadow-md w-full md:w-auto">
                            <h3 class="text-lg font-bold text-red-800 mb-2">Blood Oxygen Content</h3>
                            <div class="flex justify-around gap-2 text-sm">
                                <span class="bg-red-200 px-2 py-1 rounded">Haemoglobin</span>
                                <span class="bg-red-200 px-2 py-1 rounded">O₂ Saturation</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-4xl font-bold text-gray-500">↓</div>
                    <div class="bg-green-100 p-6 rounded-xl shadow-lg">
                        <h3 class="text-2xl font-bold text-green-800">Effective Tissue Oxygenation</h3>
                        <p class="text-green-700">The ultimate goal of cardiovascular support.</p>
                    </div>
                </div>
            </div>`;

        const renderIconsSlide = (slide) => `
            <div class="p-8 md:p-12">
                <div class="flex items-center justify-center gap-4 mb-6">
                   ${slide.icon}
                  <h2 class="text-3xl font-bold text-gray-800 text-center">${slide.title}</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
                  ${slide.items.map(item => `
                    <div class="bg-white p-4 rounded-lg shadow-md flex items-center space-x-4">
                      <div class="flex-shrink-0">${item.icon}</div>
                      <p class="text-lg text-gray-700">${item.text}</p>
                    </div>`).join('')}
                </div>
                ${slide.note ? `<p class="mt-8 text-center bg-indigo-100 border-l-4 border-indigo-500 text-indigo-700 p-4 rounded-md text-lg italic">${slide.note}</p>` : ''}
            </div>`;

        const renderSplitSlide = (slide) => `
            <div class="p-8 md:p-12 flex flex-col h-full">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">${slide.title}</h2>
                <div class="flex-grow grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="p-6 rounded-xl flex flex-col items-center justify-center text-center bg-${slide.left.color}-100 border-2 border-${slide.left.color}-300">
                        <h3 class="text-2xl font-bold text-${slide.left.color}-800">${slide.left.title}</h3>
                        <p class="mt-2 text-lg text-${slide.left.color}-700">${slide.left.content}</p>
                    </div>
                    <div class="p-6 rounded-xl flex flex-col items-center justify-center text-center bg-${slide.right.color}-100 border-2 border-${slide.right.color}-300">
                        <h3 class="text-2xl font-bold text-${slide.right.color}-800">${slide.right.title}</h3>
                        <p class="mt-2 text-lg text-${slide.right.color}-700">${slide.right.content}</p>
                    </div>
                </div>
                ${slide.note ? `<p class="mt-8 text-center bg-gray-100 border-l-4 border-gray-500 text-gray-700 p-4 rounded-md text-lg">${slide.note}</p>` : ''}
            </div>`;

        const renderProcessSlide = (slide) => `
            <div class="p-8 md:p-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-12 text-center">${slide.title}</h2>
                <div class="flex flex-col md:flex-row justify-center items-center gap-4 md:gap-0">
                  ${slide.steps.map((step, index) => `
                    <div class="flex flex-col items-center text-center max-w-xs">
                        <div class="bg-gray-200 rounded-full p-4 mb-3">
                            ${step.icon}
                        </div>
                        <h3 class="font-bold text-xl mb-1">${step.title}</h3>
                        <p class="text-gray-600">${step.description}</p>
                    </div>
                    ${index < slide.steps.length - 1 ? '<div class="hidden md:block h-1 w-16 bg-gray-300 mx-4"></div>' : ''}
                  `).join('')}
                </div>
            </div>`;
        
        const renderTableSlide = (slide) => `
            <div class="p-4 md:p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">${slide.title}</h2>
                <div class="overflow-x-auto">
                    <table class="w-full min-w-max mx-auto bg-white shadow-md rounded-lg">
                        <thead>
                            <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                                ${slide.headers.map(header => `<th class="py-3 px-6 text-left">${header}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody class="text-gray-600 text-sm font-light">
                            ${slide.rows.map(row => `
                                <tr class="border-b border-gray-200 hover:bg-gray-100">
                                    ${row.map(cell => `<td class="py-3 px-6 text-left whitespace-nowrap">${cell}</td>`).join('')}
                                </tr>`).join('')}
                        </tbody>
                    </table>
                </div>
                ${slide.note ? `<p class="mt-6 text-center text-sm text-gray-500 italic">${slide.note}</p>` : ''}
            </div>`;

        const renderFlowchartSlide = (slide) => `
            <div class="p-8 md:p-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">${slide.title}</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${slide.items.map(item => `
                        <div class="bg-${item.color}-50 border-l-4 border-${item.color}-500 p-4 rounded-r-lg shadow">
                            <h3 class="text-xl font-bold text-${item.color}-800">${item.problem}</h3>
                            <p class="text-sm text-gray-500 mb-2">Cause: ${item.cause}</p>
                            <div class="flex items-center gap-2 mt-3">
                                ${icons.ChevronsRight.replace('class="', `class="text-${item.color}-600 `)}
                                <p class="text-lg font-semibold text-${item.color}-700">${item.solution}</p>
                            </div>
                        </div>`).join('')}
                </div>
            </div>`;

        const renderSummarySlide = (slide) => `
            <div class="p-8 md:p-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">${slide.title}</h2>
                <div class="space-y-6">
                    ${slide.points.map(point => `
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg">
                            <div class="flex-shrink-0 pt-1">${point.icon}</div>
                            <p class="text-lg text-gray-700">${point.text}</p>
                        </div>`).join('')}
                </div>
            </div>`;
        
        const renderReferencesSlide = (slide) => `
            <div class="p-8 md:p-12 h-full flex flex-col">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">${slide.title}</h2>
                <div class="flex-grow overflow-y-auto">
                    <ol class="space-y-4 text-left list-decimal list-inside">
                        ${slide.references.map(ref => `<li class="text-sm text-gray-700 pl-2">${ref.replace(/\*(.*?)\*/g, '<i>$1</i>')}</li>`).join('')}
                    </ol>
                </div>
            </div>`;

        // --- Main Render Function ---
        const renderSlide = () => {
            const slide = slides[currentSlide];
            let html;
            switch (slide.type) {
                case 'title': html = renderTitleSlide(slide); break;
                case 'list': html = renderListSlide(slide); break;
                case 'diagram': html = renderDiagramSlide(slide); break;
                case 'icons': html = renderIconsSlide(slide); break;
                case 'split': html = renderSplitSlide(slide); break;
                case 'process': html = renderProcessSlide(slide); break;
                case 'table': html = renderTableSlide(slide); break;
                case 'flowchart': html = renderFlowchartSlide(slide); break;
                case 'summary': html = renderSummarySlide(slide); break;
                case 'references': html = renderReferencesSlide(slide); break;
                default: html = '<div>Unknown slide type</div>';
            }
            slideContainer.innerHTML = html;
            slideCounter.textContent = `Slide ${currentSlide + 1} of ${slides.length}`;
        };

        // --- Navigation ---
        const goToNext = () => {
            currentSlide = (currentSlide + 1) % slides.length;
            renderSlide();
        };

        const goToPrev = () => {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            renderSlide();
        };

        // --- Event Listeners ---
        prevBtn.addEventListener('click', goToPrev);
        nextBtn.addEventListener('click', goToNext);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') goToNext();
            if (e.key === 'ArrowLeft') goToPrev();
        });

        // --- Initial Render ---
        renderSlide();

    </script>
</body>
</html>
